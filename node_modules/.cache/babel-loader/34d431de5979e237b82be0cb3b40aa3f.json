{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Deferred = void 0;\n\nconst TimeoutError_1 = require(\"./TimeoutError\");\n\nclass Deferred {\n  constructor() {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._resolve = resolve;\n    });\n  }\n\n  registerTimeout(timeoutInMillis, callback) {\n    if (this._timeout) return;\n    this._timeout = setTimeout(() => {\n      callback();\n      this.reject(new TimeoutError_1.TimeoutError('Operation timeout'));\n    }, timeoutInMillis);\n  }\n\n  _clearTimeout() {\n    if (!this._timeout) return;\n    clearTimeout(this._timeout);\n  }\n\n  resolve(value) {\n    this._clearTimeout();\n\n    this._resolve(value);\n  }\n\n  reject(error) {\n    this._clearTimeout();\n\n    this._reject(error);\n  }\n\n  promise() {\n    return this._promise;\n  }\n\n}\n\nexports.Deferred = Deferred;","map":null,"metadata":{},"sourceType":"script"}